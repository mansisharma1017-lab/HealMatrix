{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}

<style>
.admin-container {
    display: flex;
    gap: 20px;
}

/* Left Side Admin Sidebar */
.sidebar {
    width: 220px;
    background: var(--theme-card-bg);
    padding: 20px;
    border-radius: 12px;
    height: fit-content;
    box-shadow: var(--theme-shadow);
}

.sidebar h2 {
    margin-top: 0;
    margin-bottom: 15px;
}

.sidebar a {
    display: block;
    padding: 10px;
    margin-bottom: 8px;
    background: var(--theme-soft);
    border-radius: 8px;
    font-weight: 600;
    color: var(--theme-text);
}

.sidebar a:hover {
    background: #0d6efd;
    color: white;
}

.logout {
    background: #e74c3c !important;
    color: white !important;
}

/* Main Area */
.main-area {
    flex: 1;
}

/* Stat Cards */
.stats-row {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
}

.stat-card {
    flex: 1;
    background: var(--theme-card-bg);
    padding: 20px;
    border-radius: 12px;
    box-shadow: var(--theme-shadow);
    text-align: center;
}

.stat-card h3 {
    margin: 0;
}

.stat-card .value {
    font-size: 28px;
    margin-top: 10px;
    font-weight: bold;
}

/* Boxes */
.section-box {
    background: var(--theme-card-bg);
    padding: 20px;
    margin-top: 20px;
    border-radius: 12px;
    box-shadow: var(--theme-shadow);
}

/* Tables */
.styled-table {
    width: 100%;
    border-collapse: collapse;
}

.styled-table th,
.styled-table td {
    padding: 10px;
    border-bottom: 1px solid var(--theme-border);
}

.styled-table th {
    background: var(--theme-soft);
}
</style>

<div class="admin-container">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h2>‚öô Admin</h2>
        <a href="/admin">Dashboard</a>
        <a href="/admin_payments">Revenue</a>
        <a href="/admin_logout" class="logout">Logout</a>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-area">

        <h1 class="page-title">üîê Admin Control Panel</h1>

        <!-- STAT CARDS -->
        <div class="stats-row">

            <div class="stat-card">
                <h3>üë• Total Users</h3>
                <p class="value">{{ users|length }}</p>
            </div>

            <div class="stat-card">
                <h3>ü¶† Diseases Listed</h3>
                <p class="value">{{ diseases|length }}</p>
            </div>

            <div class="stat-card">
                <h3>üí∞ Total Revenue</h3>
                <p class="value">‚Çπ{{ total if total else 0 }}</p>
            </div>

        </div>

        <!-- USER TABLE -->
        <div class="section-box">
            <h2>üë• Registered Users</h2>
            <table class="styled-table">
                <tr>
                    <th>Username</th>
                </tr>
                {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- DISEASE TABLE -->
        <h2>ü¶† Disease Database</h2>
<table class="styled-table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Symptoms</th>
      <th>Severity</th>
      <th>Medicine</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for d in diseases %}
      <tr>
        <td>{{ d.name }}</td>
        <td style="max-width:360px;">{{ d.symptoms | join(", ") }}</td>
        <td>{{ d.severity }}</td>
        <td>{{ d.medicine }}</td>
        <td>
          <a href="/delete_disease/{{ d.name }}" onclick="return confirm('Delete disease {{ d.name }}?')">Delete</a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
